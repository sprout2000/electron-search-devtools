"use strict";var __awaiter=this&&this.__awaiter||function(e,t,o,r){return new(o||(o=Promise))((function(i,n){function s(e){try{p(r.next(e))}catch(e){n(e)}}function a(e){try{p(r.throw(e))}catch(e){n(e)}}function p(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}p((r=r.apply(e,t||[])).next())}))},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.searchDevtools=exports.getExtDir=exports.getOptions=exports.whichDevtools=exports.typeGuardOptions=void 0;const os_1=__importDefault(require("os")),fs_1=__importDefault(require("fs")),path_1=__importDefault(require("path")),typeGuardArg=e=>null!==e&&"string"==typeof e&&("JQUERY"===e||"ANGULAR"===e||"VUE3"===e||"VUE"===e||"REACT"===e||"REDUX"===e),typeGuardOptions=e=>{if(void 0===e)return!0;if("object"!=typeof e)return!1;if(void 0===e.profile&&void 0===e.browser)return!1;if("string"!=typeof e.profile&&void 0!==e.profile)return!1;switch(e.browser){case void 0:case"google-chrome":case"chromium":return!0;default:return!1}};exports.typeGuardOptions=typeGuardOptions;const whichDevtools=e=>{switch(e){case"JQUERY":return"dbhhnnnpaeobfddmlalhnehgclcmjimi";case"ANGULAR":return"ienfalfjdbdpebioblfackkekamfmbnh";case"VUE3":return"ljjemllljcmogpfapbkkighbhhppjdbg";case"VUE":return"nhdogjmejiglipccpnnnanhbledajbpd";case"REDUX":return"lmhkpmbekcpmknklioeibfkpmmfibljd";case"REACT":return"fmkadmapgofadopljbjfkapdkoienihi";default:return""}};exports.whichDevtools=whichDevtools;const getOptions=e=>({profile:e&&e.profile||"Default",browser:e&&e.browser||"google-chrome"});exports.getOptions=getOptions;const getExtDir=(e,t)=>{const o=(0,exports.getOptions)(t);return"darwin"===e?`Library/Application Support/Google/Chrome/${o.profile}/Extensions`:"win32"===e?`AppData/Local/Google/Chrome/User Data/${o.profile}/Extensions`:`.config/${o.browser}/${o.profile}/Extensions`};exports.getExtDir=getExtDir;const searchDevtools=(e,t)=>__awaiter(void 0,void 0,void 0,(function*(){if(!typeGuardArg(e))throw new Error('You need to select an argument from the following six choices:\n "REACT", "REDUX", "ANGULAR", "VUE", "VUE3", or "JQUERY".');if(!(0,exports.typeGuardOptions)(t))throw new Error("The option should be an object containing the name of the profile or browser.");const o=path_1.default.join(os_1.default.homedir(),(0,exports.getExtDir)(os_1.default.platform(),Object.assign({},(0,exports.getOptions)(t))),(0,exports.whichDevtools)(e));return fs_1.default.promises.readdir(o,{withFileTypes:!0}).then((e=>e.filter((e=>e.isDirectory())).filter((({name:e})=>e.match(/(?:\d+\.\d+|\d{2,})\.\d+_\d+$/))).map((({name:e})=>path_1.default.resolve(o,e))).slice(-1)[0])).catch((()=>{throw new Error(`${e} Devtools is not found.`)}))}));exports.searchDevtools=searchDevtools;