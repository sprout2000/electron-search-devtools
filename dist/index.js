"use strict";var __awaiter=this&&this.__awaiter||function(e,o,t,r){return new(t||(t=Promise))((function(i,n){function s(e){try{p(r.next(e))}catch(e){n(e)}}function a(e){try{p(r.throw(e))}catch(e){n(e)}}function p(e){var o;e.done?i(e.value):(o=e.value,o instanceof t?o:new t((function(e){e(o)}))).then(s,a)}p((r=r.apply(e,o||[])).next())}))},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.searchDevtools=exports.getOptions=exports.getExtDir=exports.whichDevtools=exports.typeGuardOptions=void 0;const os_1=__importDefault(require("os")),fs_1=__importDefault(require("fs")),path_1=__importDefault(require("path")),typeGuardArg=e=>null!==e&&"string"==typeof e&&("JQUERY"===e||"ANGULAR"===e||"VUE3"===e||"VUE"===e||"REACT"===e||"REDUX"===e),typeGuardOptions=e=>{if(void 0===e)return!0;if("object"!=typeof e)return!1;if(void 0===e.profile&&void 0===e.browser)return!1;if("string"!=typeof e.profile&&void 0!==e.profile)return!1;switch(e.browser){case void 0:case"google-chrome":case"chromium":case"chromium-snap":return!0;default:return!1}};exports.typeGuardOptions=typeGuardOptions;const whichDevtools=(e,o)=>{const t=o||"Default";switch(e){case"JQUERY":return`/${t}/Extensions/dbhhnnnpaeobfddmlalhnehgclcmjimi`;case"ANGULAR":return`/${t}/Extensions/ienfalfjdbdpebioblfackkekamfmbnh`;case"VUE3":return`/${t}/Extensions/ljjemllljcmogpfapbkkighbhhppjdbg`;case"VUE":return`/${t}/Extensions/nhdogjmejiglipccpnnnanhbledajbpd`;case"REDUX":return`/${t}/Extensions/lmhkpmbekcpmknklioeibfkpmmfibljd`;default:return`/${t}/Extensions/fmkadmapgofadopljbjfkapdkoienihi`}};exports.whichDevtools=whichDevtools;const getExtDir=(e,o)=>"darwin"===e?"/Library/Application Support/Google/Chrome":"win32"===e?"/AppData/Local/Google/Chrome/User Data":"chromium-snap"===o?"/snap/chromium/common/chromium":`/.config/${o}`;exports.getExtDir=getExtDir;const getOptions=e=>({profile:e&&e.profile||"Default",browser:e&&e.browser||"google-chrome"});exports.getOptions=getOptions;const searchDevtools=(e,o)=>__awaiter(void 0,void 0,void 0,(function*(){if(!typeGuardArg(e))return void console.log("You need to select an argument from the following six choices:\n",'"REACT", "REDUX", "ANGULAR", "VUE", "VUE3", or "JQUERY".');if(!(0,exports.typeGuardOptions)(o))return void console.log("The option should be an object containing the name of the profile or browser.");const t=(0,exports.getOptions)(o),r=(0,exports.whichDevtools)(e,t.profile),i=`${e.charAt(0)}${e.slice(1).toLowerCase()} Devtools`,n=path_1.default.join(os_1.default.homedir(),(0,exports.getExtDir)(os_1.default.platform(),t.browser),r);return fs_1.default.promises.readdir(n,{withFileTypes:!0}).then((e=>e.filter((e=>e.isDirectory())).filter((({name:e})=>e.match(/[0-9]*\.?[0-9]+\.[0-9]+_[0-9]+$/))).map((({name:e})=>path_1.default.resolve(n,e))).filter((e=>__awaiter(void 0,void 0,void 0,(function*(){return fs_1.default.promises.access(`${e}${path_1.default.sep}manifest.json`).catch((()=>console.log(`manifest.json for ${i} is not found.`)))})))).pop())).then((e=>e||console.log(`${i} is undefined or not found.`))).catch((()=>console.log(`${i} is not found.`)))}));exports.searchDevtools=searchDevtools;