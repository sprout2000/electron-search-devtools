var __awaiter=this&&this.__awaiter||function(e,o,r,t){return new(r||(r=Promise))((function(n,i){function a(e){try{p(t.next(e))}catch(e){i(e)}}function s(e){try{p(t.throw(e))}catch(e){i(e)}}function p(e){var o;e.done?n(e.value):(o=e.value,o instanceof r?o:new r((function(e){e(o)}))).then(a,s)}p((t=t.apply(e,o||[])).next())}))};import os from"os";import fs from"fs";import path from"path";const typeGuardArg=e=>null!==e&&"string"==typeof e&&("JQUERY"===e||"ANGULAR"===e||"VUE3"===e||"VUE"===e||"REACT"===e||"REDUX"===e);export const typeGuardOptions=e=>{if(void 0===e)return!0;if("object"!=typeof e)return!1;if(void 0===e.profile&&void 0===e.browser)return!1;if("string"!=typeof e.profile&&void 0!==e.profile)return!1;switch(e.browser){case void 0:case"google-chrome":case"chromium":return!0;default:return!1}};export const whichDevtools=e=>{switch(e){case"JQUERY":return"dbhhnnnpaeobfddmlalhnehgclcmjimi";case"ANGULAR":return"ienfalfjdbdpebioblfackkekamfmbnh";case"VUE3":return"ljjemllljcmogpfapbkkighbhhppjdbg";case"VUE":return"nhdogjmejiglipccpnnnanhbledajbpd";case"REDUX":return"lmhkpmbekcpmknklioeibfkpmmfibljd";case"REACT":return"fmkadmapgofadopljbjfkapdkoienihi";default:return""}};export const getOptions=e=>({profile:e&&e.profile||"Default",browser:e&&e.browser||"google-chrome"});export const getExtDir=(e,o)=>{const r=getOptions(o);return"darwin"===e?`Library/Application Support/Google/Chrome/${r.profile}/Extensions`:"win32"===e?`AppData/Local/Google/Chrome/User Data/${r.profile}/Extensions`:`.config/${r.browser}/${r.profile}/Extensions`};export const searchDevtools=(e,o)=>__awaiter(void 0,void 0,void 0,(function*(){if(!typeGuardArg(e))throw new Error('You need to select an argument from the following six choices:\n "REACT", "REDUX", "ANGULAR", "VUE", "VUE3", or "JQUERY".');if(!typeGuardOptions(o))throw new Error("The option should be an object containing the name of the profile or browser.");const r=path.join(os.homedir(),getExtDir(os.platform(),Object.assign({},getOptions(o))),whichDevtools(e));return fs.promises.readdir(r,{withFileTypes:!0}).then((e=>e.filter((e=>e.isDirectory())).filter((({name:e})=>e.match(/(?:\d+\.\d+|\d{2,})\.\d+_\d+$/))).map((({name:e})=>path.resolve(r,e))).slice(-1)[0])).catch((()=>{throw new Error(`${e} Devtools is not found.`)}))}));